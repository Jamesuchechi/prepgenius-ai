'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport { useAuthStore } from '@/store/authStore'\nimport Button from '@/components/ui/Button'\nimport Link from 'next/link'\n\ntype Step = 'request' | 'confirm'\n\nexport default function ResetPasswordPage() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { requestPasswordReset, confirmPasswordReset, isLoading, error, clearError } = useAuthStore()\n  const [step, setStep] = useState<Step>('request')\n  const [email, setEmail] = useState('')\n  const [token, setToken] = useState(searchParams.get('token') || '')\n  const [formData, setFormData] = useState({ new_password: '', new_password_confirm: '' })\n\n  useEffect(() => {\n    if (token) setStep('confirm')\n  }, [])\n\n  const handleRequestSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!email) return\n\n    try {\n      await requestPasswordReset({ email })\n      // In real app, would show success message and wait for email\n    } catch (err) {\n      // Error handled\n    }\n  }\n\n  const handleConfirmSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (formData.new_password !== formData.new_password_confirm) return\n\n    try {\n      await confirmPasswordReset({\n        token,\n        new_password: formData.new_password,\n        new_password_confirm: formData.new_password_confirm,\n      })\n      router.push('/auth/signin')\n    } catch (err) {\n      // Error handled\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center px-4\">\n      <div className=\"w-full max-w-md\">\n        <h1 className=\"font-display text-4xl font-bold text-center mb-8\">Reset Password</h1>\n\n        {error && (\n          <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm\">\n            {error}\n          </div>\n        )}\n\n        {step === 'request' ? (\n          <form onSubmit={handleRequestSubmit} className=\"space-y-4\">\n            <p className=\"text-[var(--gray-dark)] text-center mb-6\">\n              Enter your email and we'll send you a password reset link\n            </p>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Email Address</label>\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                placeholder=\"your@email.com\"\n                className=\"w-full px-4 py-3 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none\"\n              />\n            </div>\n\n            <Button variant=\"primary\" type=\"submit\" disabled={isLoading || !email} className=\"w-full py-3\">\n              {isLoading ? 'Sending...' : 'Send Reset Link'}\n            </Button>\n          </form>\n        ) : (\n          <form onSubmit={handleConfirmSubmit} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">New Password</label>\n              <input\n                type=\"password\"\n                value={formData.new_password}\n                onChange={(e) => setFormData((p) => ({ ...p, new_password: e.target.value }))}\n                placeholder=\"Min. 8 characters\"\n                className=\"w-full px-4 py-3 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium mb-2\">Confirm Password</label>\n              <input\n                type=\"password\"\n                value={formData.new_password_confirm}\n                onChange={(e) => setFormData((p) => ({ ...p, new_password_confirm: e.target.value }))}\n                placeholder=\"Confirm new password\"\n                className=\"w-full px-4 py-3 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none\"\n              />\n            </div>\n\n            <Button variant=\"primary\" type=\"submit\" disabled={isLoading || !formData.new_password} className=\"w-full py-3\">\n              {isLoading ? 'Resetting...' : 'Reset Password'}\n            </Button>\n          </form>\n        )}\n\n        <p className=\"text-center text-[var(--gray-dark)] mt-6\">\n          <Link href=\"/auth/signin\" className=\"text-[var(--blue)] hover:underline\">\n            Back to Sign In\n          </Link>\n        </p>\n      </div>\n    </div>\n  )\n}\n"
