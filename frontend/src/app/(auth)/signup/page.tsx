'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport { useAuthStore } from '@/store/authStore'\nimport Button from '@/components/ui/Button'\nimport { SignUpPayload } from '@/types/user'\n\ninterface FormErrors {\n  [key: string]: string\n}\n\nexport default function SignUpPage() {\n  const router = useRouter()\n  const { register, isLoading, error, clearError } = useAuthStore()\n  const [formData, setFormData] = useState<SignUpPayload>({\n    email: '',\n    first_name: '',\n    last_name: '',\n    password: '',\n    password_confirm: '',\n    student_type: 'individual',\n    exam_targets: ['jamb'],\n  })\n  const [errors, setErrors] = useState<FormErrors>({})\n  const [agreedToTerms, setAgreedToTerms] = useState(false)\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value, type } = e.target\n    setFormData((prev) => ({\n      ...prev,\n      [name]: name === 'exam_targets' ? [value] : value,\n    }))\n    setErrors((prev) => ({ ...prev, [name]: '' }))\n    clearError()\n  }\n\n  const validateForm = (): boolean => {\n    const newErrors: FormErrors = {}\n\n    if (!formData.email) newErrors.email = 'Email is required'\n    else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email))\n      newErrors.email = 'Invalid email format'\n\n    if (!formData.first_name) newErrors.first_name = 'First name is required'\n    if (!formData.last_name) newErrors.last_name = 'Last name is required'\n\n    if (!formData.password) newErrors.password = 'Password is required'\n    else if (formData.password.length < 8) newErrors.password = 'Password must be at least 8 characters'\n\n    if (formData.password !== formData.password_confirm)\n      newErrors.password_confirm = 'Passwords do not match'\n\n    if (!agreedToTerms) newErrors.terms = 'You must agree to terms'\n\n    setErrors(newErrors)\n    return Object.keys(newErrors).length === 0\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!validateForm()) return\n\n    try {\n      await register(formData)\n      router.push('/auth/verify-email')\n    } catch (err) {\n      // Error handled by store\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center px-4 py-12\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"font-display text-4xl font-bold text-[var(--black)] mb-2\">\n            Create Account\n          </h1>\n          <p className=\"text-[var(--gray-dark)]\">\n            Join PrepGenius AI to ace your exams\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg text-sm\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Name Fields */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">\n                First Name\n              </label>\n              <input\n                type=\"text\"\n                name=\"first_name\"\n                value={formData.first_name}\n                onChange={handleChange}\n                disabled={isLoading}\n                className=\"w-full px-4 py-2 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50\"\n              />\n              {errors.first_name && <p className=\"text-red-500 text-sm mt-1\">{errors.first_name}</p>}\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">\n                Last Name\n              </label>\n              <input\n                type=\"text\"\n                name=\"last_name\"\n                value={formData.last_name}\n                onChange={handleChange}\n                disabled={isLoading}\n                className=\"w-full px-4 py-2 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50\"\n              />\n              {errors.last_name && <p className=\"text-red-500 text-sm mt-1\">{errors.last_name}</p>}\n            </div>\n          </div>\n\n          {/* Email */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">Email</label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              disabled={isLoading}\n              className={`w-full px-4 py-2 rounded-lg border-2 ${\n                errors.email ? 'border-red-500' : 'border-transparent'\n              } bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50`}\n            />\n            {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\n          </div>\n\n          {/* Student Type */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">Student Type</label>\n            <select\n              name=\"student_type\"\n              value={formData.student_type}\n              onChange={handleChange}\n              disabled={isLoading}\n              className=\"w-full px-4 py-2 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50\"\n            >\n              <option value=\"individual\">Individual Student</option>\n              <option value=\"institutional\">Institutional Student</option>\n            </select>\n          </div>\n\n          {/* Exam Target */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">Primary Exam</label>\n            <select\n              name=\"exam_targets\"\n              value={formData.exam_targets?.[0] || 'jamb'}\n              onChange={handleChange}\n              disabled={isLoading}\n              className=\"w-full px-4 py-2 rounded-lg border-2 border-transparent bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50\"\n            >\n              <option value=\"jamb\">JAMB</option>\n              <option value=\"waec\">WAEC</option>\n              <option value=\"neco\">NECO</option>\n            </select>\n          </div>\n\n          {/* Password */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">Password</label>\n            <input\n              type=\"password\"\n              name=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              disabled={isLoading}\n              placeholder=\"Min. 8 characters\"\n              className={`w-full px-4 py-2 rounded-lg border-2 ${\n                errors.password ? 'border-red-500' : 'border-transparent'\n              } bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50`}\n            />\n            {errors.password && <p className=\"text-red-500 text-sm mt-1\">{errors.password}</p>}\n          </div>\n\n          {/* Confirm Password */}\n          <div>\n            <label className=\"block text-sm font-medium text-[var(--black)] mb-2\">Confirm Password</label>\n            <input\n              type=\"password\"\n              name=\"password_confirm\"\n              value={formData.password_confirm}\n              onChange={handleChange}\n              disabled={isLoading}\n              className={`w-full px-4 py-2 rounded-lg border-2 ${\n                errors.password_confirm ? 'border-red-500' : 'border-transparent'\n              } bg-[var(--gray)] focus:border-[var(--blue)] focus:outline-none disabled:opacity-50`}\n            />\n            {errors.password_confirm && <p className=\"text-red-500 text-sm mt-1\">{errors.password_confirm}</p>}\n          </div>\n\n          {/* Terms Checkbox */}\n          <div className=\"flex items-start gap-3\">\n            <input\n              type=\"checkbox\"\n              id=\"terms\"\n              checked={agreedToTerms}\n              onChange={(e) => {\n                setAgreedToTerms(e.target.checked)\n                setErrors((prev) => ({ ...prev, terms: '' }))\n              }}\n              disabled={isLoading}\n              className=\"mt-1\"\n            />\n            <label htmlFor=\"terms\" className=\"text-sm text-[var(--gray-dark)]\">\n              I agree to the{' '}\n              <a href=\"#\" className=\"text-[var(--blue)] hover:underline\">\n                Terms of Service\n              </a>{' '}\n              and{' '}\n              <a href=\"#\" className=\"text-[var(--blue)] hover:underline\">\n                Privacy Policy\n              </a>\n            </label>\n          </div>\n          {errors.terms && <p className=\"text-red-500 text-sm\">{errors.terms}</p>}\n\n          {/* Submit */}\n          <Button variant=\"primary\" type=\"submit\" disabled={isLoading} className=\"w-full py-3 text-lg\" >\n            {isLoading ? 'Creating account...' : 'Create Account'}\n          </Button>\n        </form>\n\n        <p className=\"text-center text-[var(--gray-dark)] mt-6\">\n          Already have an account?{' '}\n          <Link\n            href=\"/auth/signin\"\n            className=\"text-[var(--blue)] font-semibold hover:text-[var(--orange)]\"\n          >\n            Sign In\n          </Link>\n        </p>\n      </div>\n    </div>\n  )\n}\n"
